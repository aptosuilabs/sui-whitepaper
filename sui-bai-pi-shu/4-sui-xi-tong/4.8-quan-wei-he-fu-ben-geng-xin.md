# 4.8 权威和副本更新

客户驱动。由于客户端故障或非拜占庭授权失败，某些授权可能未处理所有证书。因此，依赖于这些证书生成的缺失对象的因果相关交易将被拒绝。但是，客户始终可以将诚实的权威更新到能够处理正确交易的程度。它可以使用自己的过去证书存储，或使用一个或多个其他诚实的权威机构作为过去证书的来源来做到这一点。

给定一个证书 𝑐 和一个包含 𝑐 及其因果历史的 𝐶𝑡𝑣 存储，客户端可以将诚实的权威 𝑣′ 更新到也可以应用 𝑐 的程度。这涉及找到不在𝑣′中的最小证书集，这样当应用时，𝑣′中的对象包括𝑐的所有输入。使用包含证书 TxCert 的商店 𝐶𝑡𝑣 更新滞后的权威机构 𝐵 涉及：

• 客户端维护要同步的证书列表，最初设置为仅包含 TxCert。

• 客户端认为最后一个需要同步的 TxCert。它提取 TxCert 中的 Tx 并派生其所有输入对象（使用 Input(Tx)）。

• 对于每个输入对象，它检查最后生成或变异的 Tx（使用 𝐶𝑡𝑣 上的 Sync𝑣 索引）是否在 𝐵 中有证书，否则从𝐶𝑡𝑣 读取其证书并将其添加到要同步的证书列表中。

• 如果没有更多的证书可以添加到列表中（因为没有更多的输入从𝐵 中丢失），则证书列表按因果顺序排序并提交给𝐵。

上述算法也适用于将对象更新到特定版本以启用新事务。在这种情况下，生成对象版本的 Tx 的证书（在 Sync𝑣 \[ObjRef] 中找到）被提交给滞后机构。一旦是在 𝐵 上执行，正确版本的对象将可用。

执行此操作的客户端称为中继器。可以有多个中继器独立并同时运行。它们在完整性方面不受信任，并且它们的操作是无密钥的。除了客户端，权限可以运行中继器逻辑来相互更新，副本操作服务也可以充当中继器来更新滞后的权限。

块。当局为追随者在处理证书时接收更新提供了便利。这允许副本维护权威状态的最新视图。此外，当局可以使用推拉式八卦网络在短期内相互更新最新处理的交易，并减少中继器执行此功能的需要。从长远来看，滞后的当局可能会在时代边界或更频繁地使用定期状态承诺，以确保他们已经处理了直到某些检查点的完整证书集。
